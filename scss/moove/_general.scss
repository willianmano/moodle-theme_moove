body {
    background-color: $background !important; /* stylelint-disable-line */
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    line-height: 1.6;
    color: $text-primary;
}

#page-header {
    margin: 2rem auto;
    padding: 0;
    background: $surface;
    border-radius: 12px;
    box-shadow: 0 4px 6px -1px $shadow-color, 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    border: 1px solid $border-color;

    h1 {
        margin-bottom: 0;
        color: $text-primary;
        font-weight: 600;
        font-size: 1.875rem;
    }

    #page-navbar {
        display: flex;
        align-items: center;
        justify-content: right;
        padding: 1rem 1.5rem;
    }

    .courseheader {
        display: flex;
        align-items: center;
        white-space: nowrap;
        padding: 1.5rem 1.5rem 1rem;
    }

    .page-header-headings {
        background-color: initial;
        padding: 0 1.5rem 1.5rem;
    }
}

.moove-container-fluid {
    padding: 0;
    width: 100%;
    margin-right: auto;
    margin-left: auto;
}

.card {
    border: 1px solid $border-color;
    border-radius: 12px;
    background: $surface;
    box-shadow: 0 4px 6px -1px $shadow-color, 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    transition: all 0.2s ease-in-out;
    overflow: hidden;

    &:hover {
        box-shadow: 0 10px 15px -3px $shadow-color, 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        transform: translateY(-2px);
    }

    .card-header {
        background: $background-secondary;
        border-bottom: 1px solid $border-color;
        padding: 1rem 1.5rem;
        font-weight: 600;
        color: $text-primary;
    }

    .card-body {
        padding: 1.5rem;
    }

    .card-footer {
        background: $background-secondary;
        border-top: 1px solid $border-color;
        padding: 1rem 1.5rem;
    }
}

.moove-container-fluid,
.container-fluid {
    max-width: 90%;
    padding-right: 20px;
    padding-left: 20px;
    margin-right: auto;
    margin-left: auto;

    @media (min-width: 1200px) {
        max-width: 85%;
    }

    @media (min-width: 1400px) {
        max-width: 80%;
    }
}

.container-fluid.tertiary-navigation {
    max-width: 100%;
}

a {
    transition: all 0.25s ease-out;
    color: $brand-primary;
}

.dropdown-item:active,
.dropdown-item:hover,
.dropdown-item:focus,
.dropdown-item:focus-within {
    background-color: darken($brand-primary, 10%);
}

.shadow {
    box-shadow: 0 0.375rem 1.5rem 0 rgb(140 152 164 / 13%) !important;
}

.loading-overlay {
    position: fixed;
    width: 100vw;
    height: 100vh;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 4000;
    padding: 10% 0;
    background-color: #fff;

    .text {
        text-align: center;
        color: $brand-primary;
    }

    .loader {
        position: relative;
        width: 75px;
        height: 100px;
        margin: 0 auto;

        .bar {
            position: absolute;
            bottom: 0;
            width: 10px;
            height: 50%;
            background: $brand-primary;
            transform-origin: center bottom;
            box-shadow: 1px 1px 0 rgba(0, 0, 0, .2);

            @for $i from 1 through 5 {
                &:nth-child(#{$i}) {
                    left: ($i - 1) * 15px;
                    transform: scale(1, $i*.2);
                    animation: barUp#{$i} 4s infinite;
                }
            }

        }

        .ball {
            position: absolute;
            bottom: 10px;
            left: 0;
            width: 10px;
            height: 10px;
            background: $brand-primary;
            border-radius: 50%;
            animation: ball 4s infinite;
        }
    }

    @keyframes ball {
        0% {
            transform: translate(0, 0);
        }
        5% {
            transform: translate(8px, -14px);
        }
        10% {
            transform: translate(15px, -10px);
        }
        17% {
            transform: translate(23px, -24px);
        }
        20% {
            transform: translate(30px, -20px);
        }
        27% {
            transform: translate(38px, -34px);
        }
        30% {
            transform: translate(45px, -30px);
        }
        37% {
            transform: translate(53px, -44px);
        }
        40% {
            transform: translate(60px, -40px);
        }
        50% {
            transform: translate(60px, 0);
        }
        57% {
            transform: translate(53px, -14px);
        }
        60% {
            transform: translate(45px, -10px);
        }
        67% {
            transform: translate(37px, -24px);
        }
        70% {
            transform: translate(30px, -20px);
        }
        77% {
            transform: translate(22px, -34px);
        }
        80% {
            transform: translate(15px, -30px);
        }
        87% {
            transform: translate(7px, -44px);
        }
        90% {
            transform: translate(0, -40px);
        }
        100% {
            transform: translate(0, 0);
        }
    }

    @keyframes barUp1 {
        0% {
            transform: scale(1, .2);
        }
        40% {
            transform: scale(1, .2);
        }
        50% {
            transform: scale(1, 1);
        }
        90% {
            transform: scale(1, 1);
        }
        100% {
            transform: scale(1, .2);
        }
    }

    @keyframes barUp2 {
        0% {
            transform: scale(1, .4);
        }
        40% {
            transform: scale(1, .4);
        }
        50% {
            transform: scale(1, .8);
        }
        90% {
            transform: scale(1, .8);
        }
        100% {
            transform: scale(1, .4);
        }
    }

    @keyframes barUp3 {
        0% {
            transform: scale(1, .6);
        }
        100% {
            transform: scale(1, .6);
        }
    }

    @keyframes barUp4 {
        0% {
            transform: scale(1, .8);
        }
        40% {
            transform: scale(1, .8);
        }
        50% {
            transform: scale(1, .4);
        }
        90% {
            transform: scale(1, .4);
        }
        100% {
            transform: scale(1, .8);
        }
    }

    @keyframes barUp5 {
        0% {
            transform: scale(1, 1);
        }
        40% {
            transform: scale(1, 1);
        }
        50% {
            transform: scale(1, .2);
        }
        90% {
            transform: scale(1, .2);
        }
        100% {
            transform: scale(1, 1);
        }
    }
}

.continuebutton {
    margin-top: 1rem;
    color: $brand-primary;
    padding: 1rem;

    a {
        color: $brand-primary;
        text-decoration: underline;
    }
}

@include media-breakpoint-up(md) {
    .pagelayout-standard #page.drawers .main-inner,
    body.limitedwidth #page.drawers .main-inner,
    #page.drawers .main-inner,
    .moove-container-fluid,
    .container-fluid,
    .container-lg,
    .container-md,
    .container-sm,
    .container-xl,
    .container-xxl {
        max-width: 85%;
        padding-right: 15px;
        padding-left: 15px;
        margin-right: auto;
        margin-left: auto;
    }

    .header-maxwidth {
        max-width: 100%;
    }
}

@include media-breakpoint-down(md) {
    .pagelayout-standard #page.drawers .main-inner,
    body.limitedwidth #page.drawers .main-inner,
    #page.drawers .main-inner,
    .moove-container-fluid,
    .container-fluid,
    .container-lg,
    .container-md,
    .container-sm,
    .container-xl,
    .container-xxl {
        max-width: 95%;
    }
}

// Modern Form Styles
.form-control {
    border: 1px solid $border-color;
    border-radius: 8px;
    padding: 0.75rem 1rem;
    font-size: 0.875rem;
    transition: all 0.2s ease-in-out;
    background: $surface;

    &:focus {
        border-color: $brand-primary;
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        outline: none;
    }

    &::placeholder {
        color: $text-muted;
    }
}

.form-group {
    margin-bottom: 1.5rem;

    label {
        font-weight: 500;
        color: $text-primary;
        margin-bottom: 0.5rem;
        font-size: 0.875rem;
    }
}

// Modern Table Styles
.table {
    background: $surface;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 2px 4px -1px $shadow-color;
    border: 1px solid $border-color;

    thead {
        th {
            background: $background-secondary;
            border-bottom: 1px solid $border-color;
            font-weight: 600;
            color: $text-primary;
            padding: 1rem;
            font-size: 0.875rem;
        }
    }

    tbody {
        tr {
            border-bottom: 1px solid $border-color;
            transition: all 0.2s ease-in-out;

            &:hover {
                background: $background-secondary;
            }

            &:last-child {
                border-bottom: none;
            }

            td {
                padding: 1rem;
                color: $text-secondary;
                font-size: 0.875rem;
                vertical-align: middle;
            }
        }
    }
}

// Modern Alert Styles
.alert {
    border: none;
    border-radius: 12px;
    padding: 1rem 1.5rem;
    margin-bottom: 1.5rem;
    border-left: 4px solid;

    &.alert-success {
        background: lighten($brand-success, 48%);
        color: darken($brand-success, 20%);
        border-left-color: $brand-success;
    }

    &.alert-warning {
        background: lighten($brand-warning, 40%);
        color: darken($brand-warning, 20%);
        border-left-color: $brand-warning;
    }

    &.alert-danger {
        background: lighten($brand-danger, 48%);
        color: darken($brand-danger, 20%);
        border-left-color: $brand-danger;
    }

    &.alert-info {
        background: lighten($brand-info, 48%);
        color: darken($brand-info, 20%);
        border-left-color: $brand-info;
    }
}

// Modern Badge Styles
.badge {
    border-radius: 6px;
    font-weight: 500;
    font-size: 0.75rem;
    padding: 0.25rem 0.75rem;

    &.badge-primary {
        background: $brand-primary;
        color: white;
    }

    &.badge-success {
        background: $brand-success;
        color: white;
    }

    &.badge-warning {
        background: $brand-warning;
        color: white;
    }

    &.badge-danger {
        background: $brand-danger;
        color: white;
    }
}

// Loading Spinner
.spinner {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 2px solid $border-color;
    border-radius: 50%;
    border-top-color: $brand-primary;
    animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

// Improved scroll behavior
html {
    scroll-behavior: smooth;
}

// Selection styling
::selection {
    background: lighten($brand-primary, 35%);
    color: $brand-primary;
}

// Focus outline improvements
:focus {
    outline: none;
}

:focus-visible {
    outline: 2px solid $brand-primary;
    outline-offset: 2px;
}

// Custom scrollbar for webkit browsers
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: $background-secondary;
}

::-webkit-scrollbar-thumb {
    background: $text-muted;
    border-radius: 4px;

    &:hover {
        background: $text-secondary;
    }
}

// Tooltip improvements
.tooltip {
    .tooltip-inner {
        background: $text-primary;
        color: white;
        border-radius: 6px;
        padding: 0.5rem 0.75rem;
        font-size: 0.8rem;
    }

    .tooltip-arrow {
        &::before {
            border-top-color: $text-primary;
        }
    }
}
